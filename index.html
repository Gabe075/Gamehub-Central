<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GameHub Central — Downloads</title>
<meta name="description" content="GameHub Central — mods, apps e utilitários" />
<style>
  :root{
    --bg:#0f0520;
    --accent1:#7c3aed;
    --accent2:#a78bfa;
    --muted:#cfcbe2;
    --text:#e9e6f7;
    --card-radius:10px;
    --maxw:1100px;
    --gap:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:
    radial-gradient(ellipse at 10% 0%, rgba(124,58,237,0.12), transparent 10%),
    var(--bg); color:var(--text); -webkit-font-smoothing:antialiased}
  .wrap{max-width:var(--maxw);margin:18px auto;padding:0 14px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:10px;overflow:hidden;background:linear-gradient(135deg,var(--accent1),#5b21b6);display:grid;place-items:center}
  .logo img{width:100%;height:100%;object-fit:cover}
  h1{font-size:18px;margin:0}
  .sub{color:var(--muted);font-size:13px}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;text-decoration:none;font-weight:800}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:9px 12px;border-radius:10px;color:var(--muted)}
  .searchbar{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.02);padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03)}
  .searchbar input{background:transparent;border:0;outline:0;color:var(--text);width:300px}

  /* page structure similar to getmodsapk */
  .content-wrap{display:flex;gap:24px}
  .list-col{flex:1}
  .right-col{width:300px;min-width:240px}
  .post-list{display:flex;flex-direction:column;gap:14px}

  /* each post: image left, info middle, download right */
  .post{
    display:flex;align-items:center;gap:14px;padding:14px;border-radius:10px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)
  }
  .post .img{width:160px;height:96px;border-radius:8px;overflow:hidden;background:#0b0b0b;flex-shrink:0;display:grid;place-items:center}
  .post .img img{width:100%;height:100%;object-fit:cover}
  .post .info{flex:1;display:flex;flex-direction:column;gap:6px}
  .post .title{font-weight:800;font-size:16px}
  .post .desc{color:var(--muted);font-size:13px}
  .post .meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:13px}
  .post .right{display:flex;flex-direction:column;align-items:flex-end;gap:8px}
  .download-big{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;padding:10px 14px;border-radius:8px;border:0;font-weight:900;text-decoration:none}
  .copy-link{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}

  /* sidebar blocks */
  .side-block{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);margin-bottom:12px}
  .side-block h4{margin:0 0 8px 0}
  .side-block a{display:block;color:var(--text);text-decoration:none;padding:6px 6px;border-radius:6px}
  .side-block a:hover{background:rgba(255,255,255,0.02)}

  /* pagination */
  .pager{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:18px}
  .page-btn{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
  .page-btn.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border:0}

  /* detail modal */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:90;padding:18px}
  .panel{width:920px;max-width:100%;max-height:92vh;overflow:auto;border-radius:12px;background:linear-gradient(180deg, rgba(10,8,12,0.98), rgba(20,14,28,0.98));padding:18px;border:1px solid rgba(255,255,255,0.04)}
  .hero{height:260px;border-radius:10px;overflow:hidden;background:#0a0a0a;display:flex;align-items:center;justify-content:center;color:var(--muted);margin-bottom:12px}
  .screens{display:flex;gap:8px;overflow:auto}
  .screens img{width:200px;height:120px;object-fit:cover;border-radius:8px}

  @media (max-width:980px){
    .content-wrap{flex-direction:column}
    .right-col{width:100%}
    .searchbar input{width:160px}
    .post{flex-direction:column;align-items:flex-start}
    .post .right{align-self:stretch;flex-direction:row;justify-content:space-between;width:100%}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
        <div>
          <h1>GameHub Central</h1>
          <div class="sub">Mods, apps e utilitários — encontre e baixe rápido</div>
        </div>
      </div>

      <div class="actions">
        <div class="searchbar" title="Pesquisar">
          <svg width="16" height="16" viewBox="0 0 24 24" style="opacity:.7;margin-right:6px"><path fill="currentColor" d="M9.5 3a6.5 6.5 0 104.47 11.13l4.95 4.95 1.41-1.41-4.95-4.95A6.5 6.5 0 009.5 3zM5 9.5A4.5 4.5 0 119.5 14 4.5 4.5 0 015 9.5z"/></svg>
          <input id="q" placeholder="Buscar por nome, descrição ou tag">
        </div>

        <a class="btn" href="https://www.instagram.com/gabe.am29?igsh=bDc4dHl3ZGNhcm4y" target="_blank">Instagram</a>
        <a class="btn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">WhatsApp</a>
      </div>
    </header>

    <div class="content-wrap">
      <div class="list-col">
        <div id="list" class="post-list"></div>
        <div id="pager" class="pager" style="display:none"></div>
      </div>

      <aside class="right-col">
        <div class="side-block">
          <h4>Categorias</h4>
          <div id="cats"></div>
        </div>

        <div class="side-block">
          <h4>Destaques</h4>
          <div id="high"></div>
        </div>

        <div class="side-block">
          <h4>Contato</h4>
          <a href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank" class="ghost">Grupo WhatsApp</a>
        </div>
      </aside>
    </div>
  </div>

  <!-- detail overlay -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="panel">
      <button id="close" class="ghost" style="position:absolute;right:18px;top:18px">✕</button>
      <div id="detail"></div>
    </div>
  </div>

<script>
/* === Carrega apps.js sem cache e injeta === */
(async function(){
  try{
    const res = await fetch('apps.js?t=' + Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('apps.js não encontrado');
    const js = await res.text();
    const blob = new Blob([js], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);
    const s = document.createElement('script'); s.src = url;
    s.onload = ()=>{ URL.revokeObjectURL(url); start(); };
    document.body.appendChild(s);
  }catch(e){
    console.error('Falha ao carregar apps.js', e);
    const s = document.createElement('script'); s.src='apps.js'; s.onload=start; document.body.appendChild(s);
  }
})();

/* === Helpers === */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
function mkImg(url,w=160,h=96){ return url ? '<img src="'+esc(url)+'" width="'+w+'" height="'+h+'" alt="">' : ''; }
function getApps(){ return Array.isArray(window.APPS) ? window.APPS.slice().sort((a,b)=> (b.highlight?1:0)-(a.highlight?1:0) || (b.timestamp||0)-(a.timestamp||0)) : []; }

/* === Rendering list like reference site === */
const listEl = ()=>document.getElementById('list');
const catsEl = ()=>document.getElementById('cats');
const highEl = ()=>document.getElementById('high');
const pagerEl = ()=>document.getElementById('pager');

function renderPosts(items, page=1, per=10){
  const start = (page-1)*per;
  const slice = items.slice(start, start+per);
  if(!slice.length){ listEl().innerHTML = '<div style="color:var(--muted)">Nenhum app encontrado.</div>'; pagerEl().style.display='none'; return;}
  listEl().innerHTML = slice.map(a=>`
    <div class="post" data-slug="${esc(a.slug)}">
      <div class="img">${a.icon?mkImg(a.icon):''}</div>
      <div class="info">
        <div class="title">${esc(a.title)} ${a.badges?'<span style="margin-left:8px;color:#fff;background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:4px 8px;border-radius:6px;font-weight:800;font-size:12px">'+esc((a.badges||[]).join(', '))+'</span>':''}</div>
        <div class="desc">${esc(a.desc||'')}</div>
        <div class="meta"><div>${esc(a.tag||'app')}</div></div>
      </div>
      <div class="right">
        <a class="download-big" href="${esc(a.download||('files/'+a.slug+'.apk'))}" target="_blank">DOWNLOAD</a>
        <button class="copy-link" data-slug="${esc(a.slug)}">Copiar link</button>
      </div>
    </div>
  `).join('');

  // attach card click open detail (except clicks on links/buttons)
  document.querySelectorAll('.post').forEach(p=>{
    p.addEventListener('click', e=>{
      if(e.target.closest('a') || e.target.closest('button')) return;
      openDetail(p.dataset.slug);
    });
  });

  // attach copy buttons
  document.querySelectorAll('.copy-link').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const slug = btn.dataset.slug;
      const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(slug);
      try{ await navigator.clipboard.writeText(url); btn.textContent='Copiado!'; setTimeout(()=>btn.textContent='Copiar link',1400); }catch(e){}
    });
  });

  // pagination
  const totalPages = Math.ceil(items.length / per);
  if(totalPages <= 1){ pagerEl().style.display='none'; return; }
  pagerEl().style.display='flex';
  let html='';
  for(let i=1;i<=totalPages;i++){
    html += `<button class="page-btn ${i===page?'active':''}" data-page="${i}">${i}</button>`;
  }
  pagerEl().innerHTML = html;
  pagerEl().querySelectorAll('.page-btn').forEach(b=> b.addEventListener('click', ()=> {
    const p = Number(b.dataset.page); renderPosts(items,p,per);
    window.scrollTo({top:0,behavior:'smooth'});
  }));
}

/* populate categories and highlights */
function renderSide(){
  const apps = getApps();
  const cats = Array.from(new Set(apps.map(a=>a.tag).filter(Boolean)));
  catsEl().innerHTML = cats.map(c=>`<a href="#" data-cat="${esc(c)}">${esc(c)}</a>`).join('');
  document.querySelectorAll('#cats a').forEach(a=> a.addEventListener('click', e=>{ e.preventDefault(); filterBy(a.dataset.cat); }));

  const highlights = apps.filter(a=>a.highlight).slice(0,6);
  highEl().innerHTML = highlights.map(h=>`<div style="margin-bottom:10px"><a href="#/app/${encodeURIComponent(h.slug)}">${esc(h.title)}</a></div>`).join('');
}

/* filter & search */
function filterBy(tag){
  const apps = getApps().filter(a => a.tag === tag);
  renderPosts(apps,1,10);
}

function attachSearch(){
  const q = document.getElementById('q') || document.getElementById('q');
  const input = document.getElementById('q') || document.getElementById('q');
  const searchInput = document.getElementById('q') || document.getElementById('q');
  // in this file the search field id is 'q' or 'q' may not exist; use 'q' fallback to 'q'
}
function attachHeaderSearch(){
  const input = document.getElementById('q') || document.getElementById('q');
}
// simpler: search box in header is id 'q' in previous versions; current id is 'q' not present — use the visible input with id 'q' fallback to 'q'.
// but we used id 'q' earlier; in this file the search input id is 'q'? Actually header has id 'q' as 'q' not set. Use the element by placeholder.
function attachSimpleSearch(){
  const searchInput = document.querySelector('input[placeholder*="Buscar"]');
  if(!searchInput) return;
  searchInput.addEventListener('input', debounce(()=>{
    const term = searchInput.value.trim().toLowerCase();
    const items = getApps().filter(a=>{
      if(!term) return true;
      return (a.title+' '+(a.desc||'')+' '+(a.fullDesc||'')+' '+(a.tag||'')).toLowerCase().includes(term);
    });
    renderPosts(items,1,10);
  },160));
}

/* detail overlay */
function openDetail(slug){
  const apps = getApps();
  const app = apps.find(a=>a.slug===slug);
  if(!app) return;
  const screens = (app.screenshots||[]).map(s=>`<img src="${esc(s)}">`).join('');
  const dl = esc(app.download || ('files/' + app.slug + '.apk'));
  const badges = (app.badges||[]).map(b=>`<span style="margin-left:8px;color:#fff;background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:4px 8px;border-radius:6px;font-weight:800;font-size:12px">${esc(b)}</span>`).join('');
  const html = `
    <div class="hero">${screens || esc(app.title)}</div>
    <h2 style="margin-top:12px">${esc(app.title)} ${badges}</h2>
    <p style="color:var(--muted)">${esc(app.desc||'')}</p>
    <p style="color:var(--muted)"><strong>Versão:</strong> ${esc(app.version||'')} · <strong>Tamanho:</strong> ${esc(app.size||'')}</p>
    <div style="display:flex;gap:10px;margin-top:12px">
      <a class="download-big" href="${dl}" target="_blank">BAIXAR</a>
      <button id="copybtn" class="copy-link">Copiar link</button>
    </div>
    <h3 style="margin-top:16px">Descrição</h3>
    <p style="color:var(--muted)">${esc(app.fullDesc || app.desc || '')}</p>
  `;
  document.getElementById('detail').innerHTML = html;
  document.getElementById('overlay').style.display = 'flex';
  document.getElementById('overlay').setAttribute('aria-hidden','false');

  const copybtn = document.getElementById('copybtn');
  if(copybtn){
    copybtn.addEventListener('click', async ()=>{
      const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(app.slug);
      try{ await navigator.clipboard.writeText(url); copybtn.textContent='Copiado!'; setTimeout(()=>copybtn.textContent='Copiar link',1500);}catch(e){}
    });
  }
  history.pushState({slug}, '', '#/app/' + encodeURIComponent(app.slug));
}
document.getElementById('close').addEventListener('click', ()=>{ document.getElementById('overlay').style.display='none'; history.pushState({}, '', '#'); });

/* start after apps.js loaded */
function start(){
  renderPosts(getApps(),1,10);
  renderSide();
  attachSimpleSearch();
  // open hash if present
  if(location.hash.startsWith('#/app/')) openDetail(decodeURIComponent(location.hash.replace('#/app/','')));
}

/* debounce util */
function debounce(fn,t=160){ let to; return (...a)=>{ clearTimeout(to); to=setTimeout(()=>fn(...a),t); }; }

/* expose functions for testing */
window.renderPosts = renderPosts;
window.getApps = getApps;

</script>

</body>
</html>
