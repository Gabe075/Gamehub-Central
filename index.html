<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GameHub Central — Original</title>
<meta name="description" content="GameHub Central — mods, apps e utilitários" />
<style>
  :root{
    --bg:#0b0712;
    --card:#0e0916;
    --glass: rgba(255,255,255,0.04);
    --accent1:#7c3aed;
    --accent2:#b68cff;
    --muted:#cfcbe2;
    --text:#f1ecff;
    --radius:14px;
    --maxw:1100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:
    radial-gradient(1000px 400px at 10% 10%, rgba(124,58,237,0.06), transparent 6%), var(--bg); color:var(--text);-webkit-font-smoothing:antialiased}
  a{color:inherit}
  .wrap{max-width:var(--maxw);margin:18px auto;padding:18px}

  /* header */
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,var(--accent1),#5b21b6);display:grid;place-items:center}
  .logo img{width:100%;height:100%;object-fit:cover}
  .brand h1{margin:0;font-size:18px;font-weight:800}
  .header-controls{display:flex;gap:10px;align-items:center}

  .search{
    display:flex;align-items:center;gap:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:999px;padding:8px 12px;border:1px solid rgba(255,255,255,0.03)
  }
  .search input{border:0;background:transparent;color:var(--text);outline:0;width:280px;padding:6px 0}

  select{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03);padding:8px;border-radius:10px}

  .btn{
    display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));border:0;color:#fff;font-weight:700;cursor:pointer;text-decoration:none;
    box-shadow:0 10px 30px rgba(124,58,237,0.12)
  }
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);box-shadow:none}

  /* grid */
  main{display:grid;grid-template-columns:1fr 320px;gap:20px}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
    border-radius:var(--radius);padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:8px;
  }
  .card .media{height:140px;border-radius:10px;overflow:hidden;background:#06040a}
  .card .media img{width:100%;height:100%;object-fit:cover;display:block}
  .card .head{display:flex;align-items:center;justify-content:space-between;gap:8px}
  .card .title{font-weight:800;font-size:16px}
  .tags{display:flex;gap:8px;flex-wrap:wrap}
  .tag{background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:6px 8px;border-radius:999px;color:#fff;font-weight:800;font-size:12px}

  .meta{color:var(--muted);font-size:13px}
  .actions{display:flex;gap:8px;align-items:center;margin-top:6px}

  /* sidebar */
  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
  .panel h4{margin:0 0 8px 0}
  .panel a{display:block;padding:8px 6px;border-radius:8px;color:var(--text);text-decoration:none}
  .panel a:hover{background:rgba(255,255,255,0.02)}

  /* floating add */
  .fab{position:fixed;right:18px;bottom:18px;width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));display:grid;place-items:center;font-weight:900;color:#fff;cursor:pointer;box-shadow:0 14px 40px rgba(124,58,237,0.14);z-index:80}

  /* modal/panel add */
  .modal-wrap{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:100;padding:18px}
  .modal{width:920px;max-width:100%;background:linear-gradient(180deg, rgba(10,8,12,0.98), rgba(20,14,28,0.98));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);color:var(--text)}
  .form-row{display:flex;gap:10px;margin-bottom:10px}
  .form-row input,.form-row textarea, .form-row select{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);outline:0}
  .small{width:150px;flex:0}

  /* detail modal */
  .detail{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:95;padding:18px}
  .detail .box{width:920px;max-width:100%;max-height:92vh;overflow:auto;border-radius:12px;background:linear-gradient(180deg, rgba(8,6,12,0.98), rgba(18,12,28,0.98));padding:18px;border:1px solid rgba(255,255,255,0.04)}

  @media (max-width:900px){
    main{grid-template-columns:1fr;gap:12px}
    .grid{grid-template-columns:1fr}
    .search input{width:160px}
    .modal{width:96%}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
      <div><h1>GameHub Central</h1><div style="color:var(--muted);font-size:13px">Mods, apps e utilitários</div></div>
    </div>

    <div class="header-controls">
      <div class="search"><svg width="16" height="16" viewBox="0 0 24 24" style="opacity:.7"><path fill="currentColor" d="M9.5 3a6.5 6.5 0 104.47 11.13l4.95 4.95 1.41-1.41-4.95-4.95A6.5 6.5 0 009.5 3zM5 9.5A4.5 4.5 0 119.5 14 4.5 4.5 0 015 9.5z"/></svg><input id="searchInput" placeholder="Pesquisar por nome, descrição ou tag"></div>
      <select id="filterSelect">
        <option value="all">Todos</option><option value="games">Jogos</option><option value="mods">Mods</option><option value="apps">Apps</option><option value="tools">Ferramentas</option>
      </select>
      <a class="btn" id="insta" href="https://www.instagram.com/gabe.am29?igsh=bDc4dHl3ZGNhcm4y" target="_blank">Instagram</a>
      <a class="btn" id="whats" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">WhatsApp</a>
    </div>
  </header>

  <main>
    <section>
      <div id="highlight" style="display:none" class="highlight"></div>

      <div class="grid" id="grid"></div>
    </section>

    <aside class="sidebar">
      <div class="panel">
        <h4>Categorias</h4>
        <div id="categories"></div>
      </div>

      <div class="panel">
        <h4>Destaques</h4>
        <div id="sideHighlights"></div>
      </div>

      <div class="panel">
        <h4>Links</h4>
        <a class="btn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">Entrar no grupo</a>
      </div>
    </aside>
  </main>
</div>

<button class="fab" id="openAdd">＋</button>

<!-- Add modal (in-memory editor) -->
<div class="modal-wrap" id="modalWrap" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong style="font-size:16px">Adicionar / Editar postagem (em memória)</strong>
      <button id="closeModal" class="btn ghost">Fechar</button>
    </div>

    <div style="max-height:60vh;overflow:auto;padding-right:6px">
      <div class="form-row"><input id="f_title" placeholder="Título (obrigatório)"></div>
      <div class="form-row"><input id="f_slug" placeholder="Slug (ex: dramabox)" class="small"><input id="f_tag" placeholder="Tag (ex: apps)" class=""></div>
      <div class="form-row"><input id="f_version" placeholder="Versão"><input id="f_size" placeholder="Tamanho"></div>
      <div class="form-row"><input id="f_icon" placeholder="URL do ícone (opcional)"><input id="f_download" placeholder="Link de download (opcional)"></div>
      <div class="form-row"><input id="f_screens" placeholder="Screenshots (separe por | )"></div>
      <div class="form-row"><textarea id="f_desc" rows="3" placeholder="Descrição curta"></textarea></div>
      <div class="form-row"><textarea id="f_full" rows="4" placeholder="Descrição longa"></textarea></div>
    </div>

    <div style="display:flex;gap:8px;margin-top:10px">
      <button id="savePost" class="btn">Salvar (aplicar temporariamente)</button>
      <button id="exportJson" class="btn ghost">Exportar JSON (copiar)</button>
      <button id="clearTemp" class="btn ghost">Limpar temporário</button>
    </div>

    <p style="color:var(--muted);margin-top:10px">OBS: <strong>Salvar</strong> aplica a página atual em memória — nada é salvo automaticamente. Use <strong>Exportar JSON</strong> para copiar os posts e colar no seu <code>apps.js</code> permanentemente.</p>
  </div>
</div>

<!-- detail modal -->
<div class="detail" id="detailModal" aria-hidden="true">
  <div class="box">
    <button id="closeDetail" class="btn ghost" style="position:absolute;right:24px;top:24px">✕</button>
    <div id="detailContent"></div>
  </div>
</div>

<script>
/* Carrega apps.js sem cache (única fonte inicial) */
(async function(){
  try{
    const res = await fetch('apps.js?t=' + Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('apps.js não encontrado');
    const js = await res.text();
    const blob = new Blob([js], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);
    const s = document.createElement('script'); s.src = url;
    s.onload = ()=>{ URL.revokeObjectURL(url); bootstrap(); };
    document.body.appendChild(s);
  }catch(e){
    console.error('Falha ao carregar apps.js', e);
    const s = document.createElement('script'); s.src='apps.js'; s.onload=bootstrap; document.body.appendChild(s);
  }
})();

/* --- UTIL --- */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
function q(id){ return document.getElementById(id); }
function nowTs(){ return Date.now(); }

/* In-memory app list: start from window.APPS (loaded) */
let TEMP_APPS = []; // in-memory only; page shows window.APPS + TEMP_APPS (TEMP overrides same slug)
function allApps(){
  const base = Array.isArray(window.APPS) ? window.APPS.slice() : [];
  // combine, TEMP_APPS override by slug
  const map = {};
  base.forEach(a=> map[a.slug] = a);
  TEMP_APPS.forEach(a=> map[a.slug] = a);
  return Object.values(map).sort((a,b)=> (b.highlight?1:0)-(a.highlight?1:0) || (b.timestamp||0)-(a.timestamp||0));
}

/* bootstrap */
function bootstrap(){
  // ensure APPS exists
  if(!Array.isArray(window.APPS)) window.APPS = [];
  renderAll();
  attachUI();
}

/* render everything */
function renderAll(){
  const apps = allApps();
  renderGrid(apps);
  renderSidebar(apps);
  renderHighlight(apps);
}

/* render grid */
function renderGrid(apps){
  const grid = q('grid');
  if(!apps.length){ grid.innerHTML = '<div style="color:var(--muted)">Nenhum app.</div>'; return; }
  grid.innerHTML = apps.map(a=>`
    <div class="card" data-slug="${esc(a.slug)}">
      <div class="media">${a.screenshots && a.screenshots[0] ? '<img src="'+esc(a.screenshots[0])+'">' : (a.icon?'<img src="'+esc(a.icon)+'">':'')}</div>
      <div class="head"><div class="title">${esc(a.title)}</div><div class="tags">${(a.badges||[]).map(b=>'<span class="tag">'+esc(b)+'</span>').join(' ')}</div></div>
      <div class="desc">${esc(a.desc||'')}</div>
      <div class="meta">${esc(a.version||'')} · ${esc(a.size||'')}</div>
      <div class="actions">
        <a class="btn" href="${esc(a.download||('files/'+a.slug+'.apk'))}" target="_blank">Download</a>
        <button class="btn ghost" data-open="${esc(a.slug)}">Abrir</button>
      </div>
    </div>
  `).join('');
  // attach open buttons and card clicks
  grid.querySelectorAll('[data-open]').forEach(btn=> btn.addEventListener('click', e=> { const s=btn.dataset.open; openDetail(s); }));
  grid.querySelectorAll('.card').forEach(card=>{
    card.addEventListener('click', e=>{
      if(e.target.closest('a') || e.target.closest('button')) return;
      openDetail(card.dataset.slug);
    });
  });
}

/* render highlight (first highlight or first app) */
function renderHighlight(apps){
  const el = q('highlight');
  const first = apps.find(a=>a.highlight) || apps[0];
  if(!first){ el.style.display='none'; return; }
  el.style.display='block';
  el.innerHTML = `
    <div class="art"><img src="${esc(first.screenshots && first.screenshots[0] ? first.screenshots[0] : (first.icon||''))}" style="width:100%;height:100%;object-fit:cover;border-radius:10px"></div>
    <div class="info">
      <h2>${esc(first.title)}</h2>
      <p style="color:var(--muted)">${esc(first.desc||'')}</p>
      <div style="margin-top:12px">
        <button class="btn" onclick="openDetail('${esc(first.slug)}')">Abrir</button>
        <a class="btn" href="${esc(first.download||('files/'+first.slug+'.apk'))}" target="_blank" style="margin-left:8px">Download</a>
      </div>
    </div>
  `;
}

/* render sidebar */
function renderSidebar(apps){
  const cats = Array.from(new Set(apps.map(a=>a.tag).filter(Boolean)));
  q('categories').innerHTML = cats.map(c=>`<a href="#" data-cat="${esc(c)}">${esc(c)}</a>`).join('');
  q('categories').querySelectorAll('a').forEach(a=> a.addEventListener('click', e=>{ e.preventDefault(); q('filterSelect').value = a.dataset.cat; renderAll(); }));
  q('sideHighlights').innerHTML = apps.filter(a=>a.highlight).slice(0,6).map(h=>`<a href="#" data-open="${esc(h.slug)}">${esc(h.title)}</a>`).join('');
  q('sideHighlights').querySelectorAll('[data-open]').forEach(a=> a.addEventListener('click', e=>{ e.preventDefault(); openDetail(a.dataset.open); }));
}

/* UI: search, filter, add modal */
function attachUI(){
  q('searchInput').addEventListener('input', debounce(()=> renderAllSearch(), 160));
  q('filterSelect').addEventListener('change', ()=> renderAll());
  q('openAdd').addEventListener('click', ()=> { q('modalWrap').style.display='flex'; q('modalWrap').setAttribute('aria-hidden','false'); });
  q('closeModal').addEventListener('click', ()=> { q('modalWrap').style.display='none'; q('modalWrap').setAttribute('aria-hidden','true'); });
  q('savePost').addEventListener('click', saveTemporaryPost);
  q('exportJson').addEventListener('click', exportJson);
  q('clearTemp').addEventListener('click', ()=>{ TEMP_APPS=[]; renderAll(); alert('Conteúdo temporário removido (não afeta apps.js).'); });
  q('closeDetail').addEventListener('click', ()=> { q('detailModal').style.display='none'; q('detailModal').setAttribute('aria-hidden','true'); history.pushState({},'',location.pathname); });
}

/* search applied */
function renderAllSearch(){
  const term = q('searchInput').value.trim().toLowerCase();
  const filter = q('filterSelect').value;
  const apps = allApps().filter(a=>{
    if(filter !== 'all' && (a.tag||'') !== filter) return false;
    if(!term) return true;
    return (a.title+' '+(a.desc||'')+' '+(a.fullDesc||'')+' '+(a.tag||'')).toLowerCase().includes(term);
  });
  renderGrid(apps);
}

/* save temporary post (in-memory) */
function saveTemporaryPost(){
  const title = q('f_title').value.trim();
  const slug = q('f_slug').value.trim();
  if(!title || !slug){ alert('Título e slug obrigatórios'); return; }
  const obj = {
    title,
    slug,
    desc: q('f_desc').value.trim(),
    fullDesc: q('f_full').value.trim(),
    tag: q('f_tag').value.trim() || 'apps',
    version: q('f_version').value.trim(),
    size: q('f_size').value.trim(),
    download: q('f_download').value.trim(),
    icon: q('f_icon').value.trim(),
    screenshots: q('f_screens').value ? q('f_screens').value.split('|').map(s=>s.trim()).filter(Boolean) : [],
    badges: [],
    highlight: false,
    timestamp: nowTs()
  };
  // replace if exists in TEMP_APPS
  const idx = TEMP_APPS.findIndex(a=>a.slug === obj.slug);
  if(idx >= 0) TEMP_APPS[idx] = obj; else TEMP_APPS.unshift(obj);
  q('modalWrap').style.display='none'; q('modalWrap').setAttribute('aria-hidden','true');
  renderAll();
  alert('Post adicionado temporariamente. Use "Exportar JSON" para copiar o JSON e colar em apps.js se quiser salvar permanentemente.');
}

/* export JSON (copy to clipboard) => combines window.APPS + TEMP_APPS */
function exportJson(){
  const combined = allApps();
  const json = JSON.stringify(combined, null, 2);
  copyToClipboard(json);
  alert('JSON copiado para a área de transferência. Cole no seu apps.js substituindo o conteúdo (window.APPS = [...]);');
}

/* open detail modal */
function openDetail(slug){
  const app = allApps().find(a=>a.slug === slug);
  if(!app) return;
  const screens = (app.screenshots||[]).map(s=>`<img src="${esc(s)}" style="width:260px;height:150px;object-fit:cover;border-radius:8px;margin-right:8px">`).join('');
  const dl = esc(app.download || ('files/' + app.slug + '.apk'));
  const html = `
    <div style="display:flex;gap:12px;align-items:flex-start">
      <div style="flex:1">
        <h2 style="margin-top:0">${esc(app.title)}</h2>
        <p style="color:var(--muted)">${esc(app.desc||'')}</p>
        <p style="color:var(--muted)"><strong>Versão:</strong> ${esc(app.version||'')} · <strong>Tamanho:</strong> ${esc(app.size||'')}</p>
        <div style="margin-top:12px"><a class="btn" href="${dl}" target="_blank">Baixar</a> <button id="copyLinkBtn" class="btn ghost" style="margin-left:8px">Copiar link</button></div>
        <h3 style="margin-top:14px">Descrição</h3>
        <p style="color:var(--muted)">${esc(app.fullDesc || app.desc || '')}</p>
      </div>
      <div style="width:300px">
        <div style="border-radius:10px;overflow:hidden;background:#06040a;height:200px">${app.icon?'<img src="'+esc(app.icon)+'" style="width:100%;height:100%;object-fit:cover">':''}</div>
        <div style="display:flex;gap:8px;margin-top:10px;overflow:auto">${screens}</div>
      </div>
    </div>
  `;
  q('detailContent').innerHTML = html;
  q('detailModal').style.display='flex'; q('detailModal').setAttribute('aria-hidden','false');

  // copy link
  q('copyLinkBtn')?.addEventListener('click', async ()=>{
    const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(app.slug);
    await copyToClipboard(url);
    q('copyLinkBtn').textContent = 'Copiado!';
    setTimeout(()=>{ if(q('copyLinkBtn')) q('copyLinkBtn').textContent = 'Copiar link'; }, 1400);
  });

  history.pushState({slug}, '', '#/app/' + encodeURIComponent(app.slug));
}

/* small util: copy */
function copyToClipboard(text){
  return navigator.clipboard?.writeText(text).catch(()=>{ // fallback
    const t = document.createElement('textarea'); t.value = text; document.body.appendChild(t); t.select();
    try{ document.execCommand('copy'); document.body.removeChild(t); }catch(e){ document.body.removeChild(t); throw e; }
  });
}

/* debounce */
function debounce(fn,t=160){ let to; return (...a)=>{ clearTimeout(to); to=setTimeout(()=>fn(...a),t); }; }

/* expose internal for dev */
window._TEMP_APPS = TEMP_APPS;

/* on load: if hash present open detail */
window.addEventListener('load', ()=>{
  if(location.hash.startsWith('#/app/')) setTimeout(()=> openDetail(decodeURIComponent(location.hash.replace('#/app/',''))), 300);
});
</script>
</body>
  </html>
