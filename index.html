<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GameHub Central — Vitrine</title>
<meta name="description" content="GameHub Central — loja de apps e mods." />
<style>
  :root{
    --bg:#0f0520;
    --accent1:#7c3aed;
    --accent2:#a78bfa;
    --glass: rgba(255,255,255,0.03);
    --muted:#cfcbe2;
    --text:#e9e6f7;
    --card-radius:12px;
    --maxw:1100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:
    radial-gradient(ellipse at 10% 0%, rgba(124,58,237,0.12), transparent 10%),
    var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  .wrap{max-width:var(--maxw);margin:18px auto;padding:0 14px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,var(--accent1),#5b21b6);display:grid;place-items:center}
  .logo img{width:100%;height:100%;object-fit:cover;display:block}
  h1{font-size:18px;margin:0}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;padding:8px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700;text-decoration:none}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;color:var(--muted)}
  .searchbar{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.02);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.03)}
  .searchbar input{background:transparent;border:0;outline:0;color:var(--text);width:260px}
  .topline{display:flex;align-items:center;justify-content:space-between;gap:12px}

  /* main listing: similar to getmodsapk style */
  .main{display:flex;gap:24px}
  .content{flex:1}
  .sidebar{width:260px;min-width:200px}
  .card-list{display:flex;flex-direction:column;gap:12px}
  .card{
    display:flex;gap:12px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:10px;border:1px solid rgba(255,255,255,0.03);align-items:center;
  }
  .card .img{width:120px;height:80px;border-radius:8px;overflow:hidden;flex-shrink:0;background:#111;display:grid;place-items:center}
  .card .img img{width:100%;height:100%;object-fit:cover;display:block}
  .card .info{flex:1}
  .title{font-weight:800;font-size:16px;margin-bottom:6px}
  .desc{color:var(--muted);font-size:13px;margin-bottom:8px}
  .meta{display:flex;gap:8px;align-items:center;justify-content:space-between}
  .meta .left{display:flex;gap:8px;align-items:center}
  .tag{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:8px;color:var(--muted);font-size:12px}

  /* sidebar blocks */
  .side-block{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);margin-bottom:12px}
  .side-block h4{margin:0 0 8px 0}
  .cat-list a{display:block;color:var(--text);text-decoration:none;padding:6px 6px;border-radius:8px}
  .cat-list a:hover{background:rgba(255,255,255,0.02)}

  /* detail modal */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:90;padding:18px}
  .panel{width:920px;max-width:100%;max-height:92vh;overflow:auto;border-radius:12px;background:linear-gradient(180deg, rgba(8,6,12,0.98), rgba(18,12,28,0.98));padding:18px;border:1px solid rgba(255,255,255,0.04)}
  .hero{height:220px;border-radius:10px;overflow:hidden;background:#0a0a0a;display:flex;align-items:center;justify-content:center;color:var(--muted);margin-bottom:12px}
  .screenshots{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
  .screenshots img{width:160px;height:90px;object-fit:cover;border-radius:8px}

  /* admin prompt */
  .admin-prompt{position:fixed;left:50%;top:40%;transform:translate(-50%,-50%);z-index:100;background:linear-gradient(180deg, rgba(12,8,18,0.98), rgba(18,12,28,0.98));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);display:none}
  .admin-prompt input{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);width:260px;margin-right:8px}
  .admin-controls{display:flex;flex-direction:column;gap:8px}

  .footer-note{color:var(--muted);font-size:13px;margin-top:20px;text-align:center}

  @media (max-width:900px){
    .main{flex-direction:column}
    .sidebar{order:2;width:100%}
    .searchbar input{width:140px}
    .card{flex-direction:column;align-items:flex-start}
    .card .img{width:100%;height:160px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
        <div>
          <h1>GameHub Central</h1>
          <div style="color:var(--muted);font-size:13px">Mods, apps e utilitários</div>
        </div>
      </div>

      <div class="actions">
        <div class="searchbar">
          <svg width="16" height="16" viewBox="0 0 24 24" style="opacity:.7;margin-right:6px"><path fill="currentColor" d="M9.5 3a6.5 6.5 0 104.47 11.13l4.95 4.95 1.41-1.41-4.95-4.95A6.5 6.5 0 009.5 3zM5 9.5A4.5 4.5 0 119.5 14 4.5 4.5 0 015 9.5z"/></svg>
          <input id="search" placeholder="Buscar por nome, descrição ou tag">
        </div>

        <button id="openAdminBtn" class="ghost">Adicionar postagem</button>
        <a class="btn" href="https://www.instagram.com/gabe.am29?igsh=bDc4dHl3ZGNhcm4y" target="_blank">Instagram</a>
        <a class="btn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">WhatsApp</a>
      </div>
    </header>

    <div class="topline">
      <div style="font-size:14px">Encontrou algo que gostou? Abra a página do app e use o botão "Copiar link" para enviar.</div>
      <div style="color:var(--muted);font-size:13px">Layout inspirado no estilo de sites de mods — cores e identidade GameHub.</div>
    </div>

    <div class="main" style="margin-top:12px">
      <div class="content">
        <div id="list" class="card-list"></div>
        <div id="empty" style="display:none;color:var(--muted)">Nenhum app encontrado.</div>
        <div class="footer-note">GameHub Central — criado por você</div>
      </div>

      <aside class="sidebar">
        <div class="side-block">
          <h4>Categorias</h4>
          <div id="cats" class="cat-list"></div>
        </div>

        <div class="side-block">
          <h4>Destaques</h4>
          <div id="side-high"></div>
        </div>

        <div class="side-block">
          <h4>Links</h4>
          <a class="ghost" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">Grupo WhatsApp</a>
        </div>
      </aside>
    </div>
  </div>

  <!-- detail overlay -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="panel">
      <button id="closeDetail" class="ghost" style="position:absolute;right:18px;top:18px">✕</button>
      <div id="detailInner"></div>
    </div>
  </div>

  <!-- admin password prompt -->
  <div id="adminPrompt" class="admin-prompt" role="dialog" aria-hidden="true">
    <div style="font-weight:800;margin-bottom:10px">Acesso ao painel — digite a senha</div>
    <div style="display:flex;gap:8px;align-items:center">
      <input id="adminPass" type="password" placeholder="Senha">
      <button id="adminSubmit" class="btn">Entrar</button>
      <button id="adminCancel" class="ghost">Cancelar</button>
    </div>
    <div style="margin-top:10px;color:var(--muted);font-size:13px">Senha: <strong>Ancião69</strong></div>
  </div>

  <!-- admin panel (after auth) -->
  <div id="adminPanel" class="admin-prompt" style="display:none;max-width:860px">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:800">Painel — Adicionar / Editar postagem</div>
      <div><button id="adminClose" class="ghost">Fechar</button></div>
    </div>

    <div style="margin-top:10px" class="admin-controls">
      <input id="a_title" placeholder="Título do app (obrigatório)">
      <input id="a_slug" placeholder="Slug (ex: dramabox) - obrigatório">
      <input id="a_tag" placeholder="Tag (games, mods, apps)" value="mods">
      <input id="a_version" placeholder="Versão (ex: v4.8.1)">
      <input id="a_size" placeholder="Tamanho (ex: 27 MB)">
      <input id="a_icon" placeholder="URL do ícone (opcional)">
      <input id="a_download" placeholder="URL de download (opcional)">
      <input id="a_screens" placeholder="Screenshots (separar por | )">
      <textarea id="a_desc" placeholder="Descrição curta"></textarea>
      <textarea id="a_full" placeholder="Descrição longa"></textarea>

      <div style="display:flex;gap:8px">
        <button id="savePost" class="btn">Salvar post (local)</button>
        <button id="exportPosts" class="ghost">Exportar JSON</button>
        <button id="clearLocal" class="ghost">Limpar posts locais</button>
      </div>
      <div style="color:var(--muted);font-size:13px">Posts salvos localmente (localStorage). Use Exportar JSON para copiar para apps.js permanente.</div>
    </div>
  </div>

<script>
/* -------------------------
  Loader: pega apps.js sem cache e injeta
------------------------- */
(async function(){
  try{
    const res = await fetch('apps.js?t=' + Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('apps.js não encontrado');
    const js = await res.text();
    const blob = new Blob([js], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);
    const s = document.createElement('script'); s.src = url;
    s.onload = ()=>{ URL.revokeObjectURL(url); boot(); };
    document.body.appendChild(s);
  }catch(e){
    console.error('Falha ao carregar apps.js', e);
    const s = document.createElement('script'); s.src='apps.js'; s.onload=boot; document.body.appendChild(s);
  }
})();

/* Helpers */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
function mkImg(url, w=120,h=80){ return url ? '<img src="'+esc(url)+'" alt="" style="width:100%;height:100%;object-fit:cover">' : ''; }

/* Render list style getmodsapk-like */
function renderList(items){
  const list = document.getElementById('list');
  if(!items || !items.length){
    document.getElementById('empty').style.display='block';
    list.innerHTML='';
    return;
  }
  document.getElementById('empty').style.display='none';
  list.innerHTML = items.map(a=>`
    <div class="card" data-slug="${esc(a.slug)}">
      <div class="img">${a.icon ? mkImg(a.icon): ''}</div>
      <div class="info">
        <div class="title">${esc(a.title)} ${a.badges ? '<span style="margin-left:8px;color:#fff;background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:4px 8px;border-radius:6px;font-weight:800;font-size:12px">'+esc((a.badges||[]).join(', '))+'</span>':''}</div>
        <div class="desc">${esc(a.desc||'')}</div>
        <div class="meta">
          <div class="left"><span class="tag">${esc(a.tag||'app')}</span></div>
          <div class="right"><a href="#/app/${encodeURIComponent(a.slug)}" class="btn" data-slug="${esc(a.slug)}">Abrir</a></div>
        </div>
      </div>
    </div>
  `).join('');
  // attach clicks
  document.querySelectorAll('.card').forEach(c=>{
    c.addEventListener('click', e=>{
      if(e.target.closest('a')) return;
      const slug = c.dataset.slug;
      openDetail(slug);
    });
  });
}

/* Merge apps from apps.js + localStorage */
function getAllApps(){
  const base = Array.isArray(window.APPS) ? window.APPS.slice() : [];
  const local = JSON.parse(localStorage.getItem('gh_local_apps') || '[]');
  // avoid duplicates by slug: local overrides
  const map = {};
  base.forEach(a=>map[a.slug]=a);
  local.forEach(a=>map[a.slug]=a);
  // return sorted by highlight/timestamp
  return Object.values(map).sort((a,b)=> (b.highlight?1:0)-(a.highlight?1:0) || (b.timestamp||0)-(a.timestamp||0));
}

/* populate categories and side highlights */
function populateSide(){
  const apps = getAllApps();
  const cats = Array.from(new Set(apps.map(a=>a.tag).filter(Boolean)));
  document.getElementById('cats').innerHTML = cats.map(c=>`<a href="#" data-cat="${esc(c)}">${esc(c)}</a>`).join('');
  document.querySelectorAll('#cats a').forEach(a=>{
    a.addEventListener('click', e=>{
      e.preventDefault();
      const cat = a.dataset.cat;
      applyFilter(cat);
    });
  });
  const highlights = apps.filter(a=>a.highlight).slice(0,4);
  document.getElementById('side-high').innerHTML = highlights.map(h=>`<div style="margin-bottom:8px"><a href="#/app/${encodeURIComponent(h.slug)}">${esc(h.title)}</a></div>`).join('');
}

/* initial boot after apps.js loaded */
function boot(){
  renderList(getAllApps());
  populateSide();
  attachSearch();
  // open hash route if present
  if(location.hash.startsWith('#/app/')) openDetail(decodeURIComponent(location.hash.replace('#/app/','')));
}

/* search */
function attachSearch(){
  const input = document.getElementById('search');
  input.addEventListener('input', debounce(()=>{
    const term = input.value.trim().toLowerCase();
    const list = getAllApps().filter(a=>{
      if(!term) return true;
      return (a.title+' '+(a.desc||'')+' '+(a.fullDesc||'')+' '+(a.tag||'')).toLowerCase().includes(term);
    });
    renderList(list);
  },160));
}

/* filter apply */
function applyFilter(tag){
  const list = getAllApps().filter(a=>a.tag===tag);
  renderList(list);
}

/* open detail modal (single page) */
function openDetail(slug){
  const all = getAllApps();
  const app = all.find(x=>x.slug===slug);
  if(!app) return;
  // generate HTML
  const screenshots = (app.screenshots||[]).map(s=>`<img src="${esc(s)}">`).join('');
  const dl = esc(app.download || ('files/'+app.slug+'.apk'));
  const html = `
    <div class="hero">${screenshots || esc(app.title)}</div>
    <h2 style="margin-top:12px">${esc(app.title)} ${app.badges?'<span style="margin-left:10px;color:#fff;background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:4px 8px;border-radius:6px;font-weight:800;font-size:12px">'+esc((app.badges||[]).join(', '))+'</span>':''}</h2>
    <p style="color:var(--muted)">${esc(app.desc||'')}</p>
    <p style="color:var(--muted)"><strong>Versão:</strong> ${esc(app.version||'')} · <strong>Tamanho:</strong> ${esc(app.size||'')}</p>
    <div style="display:flex;gap:10px;margin-top:12px">
      <a class="btn" href="${dl}" target="_blank">Baixar</a>
      <button id="copyLink" class="ghost">Copiar link</button>
    </div>
    <h3 style="margin-top:16px">Descrição</h3>
    <p style="color:var(--muted)">${esc(app.fullDesc || app.desc || '')}</p>
  `;
  document.getElementById('detailInner').innerHTML = html;
  document.getElementById('overlay').style.display = 'flex';
  document.getElementById('overlay').setAttribute('aria-hidden','false');
  // copy link
  const copyBtn = document.getElementById('copyLink');
  if(copyBtn){
    copyBtn.addEventListener('click', async ()=>{
      const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(app.slug);
      try{ await navigator.clipboard.writeText(url); copyBtn.textContent='Copiado!'; setTimeout(()=>copyBtn.textContent='Copiar link',1500);}catch(e){}
    });
  }
  // update hash
  history.pushState({slug}, '', '#/app/' + encodeURIComponent(app.slug));
}
document.getElementById('closeDetail').addEventListener('click', ()=>{ document.getElementById('overlay').style.display='none'; history.pushState({}, '', '#'); });

/* admin flow: password prompt then show admin panel */
const openAdminBtn = document.getElementById('openAdminBtn');
const adminPrompt = document.getElementById('adminPrompt');
const adminPanel = document.getElementById('adminPanel');

openAdminBtn.addEventListener('click', ()=>{ adminPrompt.style.display='block'; adminPrompt.setAttribute('aria-hidden','false'); document.getElementById('adminPass').focus(); });
document.getElementById('adminCancel').addEventListener('click', ()=>{ adminPrompt.style.display='none'; });

document.getElementById('adminSubmit').addEventListener('click', ()=>{
  const pass = document.getElementById('adminPass').value || '';
  // password required by user: Ancião69
  if(pass === 'Ancião69'){
    adminPrompt.style.display='none';
    showAdminPanel();
  } else {
    alert('Senha incorreta.');
  }
});

function showAdminPanel(){
  adminPanel.style.display='block';
  adminPanel.setAttribute('aria-hidden','false');
  // load fields empty
  document.getElementById('a_title').value = '';
  document.getElementById('a_slug').value = '';
  document.getElementById('a_tag').value = 'mods';
  document.getElementById('a_version').value = '';
  document.getElementById('a_size').value = '';
  document.getElementById('a_icon').value = '';
  document.getElementById('a_download').value = '';
  document.getElementById('a_screens').value = '';
  document.getElementById('a_desc').value = '';
  document.getElementById('a_full').value = '';
}

/* admin actions: save post locally */
document.getElementById('savePost').addEventListener('click', ()=>{
  const slug = (document.getElementById('a_slug').value||'').trim();
  const title = (document.getElementById('a_title').value||'').trim();
  if(!slug || !title){ alert('Slug e título são obrigatórios.'); return; }
  const obj = {
    title: title,
    slug: slug,
    tag: document.getElementById('a_tag').value || 'mods',
    version: document.getElementById('a_version').value || '',
    size: document.getElementById('a_size').value || '',
    icon: document.getElementById('a_icon').value || '',
    download: document.getElementById('a_download').value || '',
    screenshots: (document.getElementById('a_screens').value || '').split('|').map(s=>s.trim()).filter(Boolean),
    desc: document.getElementById('a_desc').value || '',
    fullDesc: document.getElementById('a_full').value || '',
    badges: [],
    highlight: false,
    timestamp: Date.now()
  };
  const arr = JSON.parse(localStorage.getItem('gh_local_apps') || '[]');
  const idx = arr.findIndex(a=>a.slug===obj.slug);
  if(idx>=0) arr[idx] = obj; else arr.unshift(obj);
  localStorage.setItem('gh_local_apps', JSON.stringify(arr));
  alert('Post salvo localmente. Está disponível imediatamente.');
  adminPanel.style.display='none';
  // refresh UI
  renderList(getAllApps());
  populateSide();
}

/* export local posts as JSON */
document.getElementById('exportPosts').addEventListener('click', ()=>{
  const arr = JSON.parse(localStorage.getItem('gh_local_apps') || '[]');
  if(!arr.length){ alert('Sem posts locais para exportar'); return; }
  const txt = JSON.stringify(arr, null, 2);
  prompt('Copie o JSON e cole em apps.js (ou mantenha local):', txt);
});

/* clear local posts */
document.getElementById('clearLocal').addEventListener('click', ()=>{
  if(confirm('Remover todos os posts salvos localmente?')){ localStorage.removeItem('gh_local_apps'); alert('Removido. Atualize a página.'); }
});

/* close admin */
document.getElementById('adminClose').addEventListener('click', ()=>{ adminPanel.style.display='none'; });

/* keyboard convenience (Ctrl+Shift+A opens prompt) */
document.addEventListener('keydown', (e)=>{
  if(e.ctrlKey && e.shiftKey && e.key.toLowerCase()==='a'){ adminPrompt.style.display='block'; }
});

/* util debounce */
function debounce(fn, t=160){ let to; return (...a)=>{ clearTimeout(to); to=setTimeout(()=>fn(...a), t); }; }

/* expose getAllApps for internal use */
window.getAllApps = getAllApps;

</script>

</body>
    </html>
