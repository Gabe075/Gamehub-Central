<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>GameHub Central</title>
<meta name="description" content="GameHub Central — mobile mini-site de apps"/>
<style>
:root{
  --bg:#0b0712;
  --panel:#0f0c18;
  --accent1:#7c3aed;
  --accent2:#b889ff;
  --muted:#cfcbe2;
  --text:#f1ecff;
  --card-radius:14px;
  --sidebar-w:320px;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter,system-ui,Roboto,Arial;background:
  radial-gradient(700px 260px at 10% 4%, rgba(124,58,237,0.06), transparent 6%),var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
.app{max-width:480px;margin:0 auto;padding:12px}

/* top */
.top{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.hamb{
  width:46px;height:46px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));
  display:grid;place-items:center;border:0;color:#fff;font-weight:800;box-shadow:0 10px 30px rgba(124,58,237,0.12)
}
.logo{width:46px;height:46px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,var(--accent1),#5b21b6);display:grid;place-items:center}
.logo img{width:100%;height:100%;object-fit:cover}
.title{font-weight:800;font-size:16px}
.subtitle{font-size:12px;color:var(--muted)}

/* main list (no search here) */
.list{display:flex;flex-direction:column;gap:12px;margin-top:6px}
.card{display:flex;gap:12px;align-items:center;padding:14px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 26px rgba(0,0,0,0.45)}
.thumb{width:92px;height:72px;border-radius:10px;background:#040406;overflow:hidden;flex-shrink:0}
.thumb img{width:100%;height:100%;object-fit:cover}
.info{flex:1}
.title-card{font-weight:800}
.desc{color:var(--muted);font-size:13px;margin-top:6px}
.meta{color:var(--muted);font-size:13px;margin-top:8px}
.actions{display:flex;gap:8px;align-items:center}

/* buttons */
.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border:0;font-weight:800}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

/* nice header area above list (search removed from main) */
.header-info{display:flex;align-items:center;gap:12px;margin-bottom:4px}

/* sidebar (slide in) improved visuals */
.sidebar{
  position:fixed;left:calc(-1 * var(--sidebar-w));top:0;height:100%;width:var(--sidebar-w);
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-right:1px solid rgba(255,255,255,0.03);padding:18px;transition:left .28s cubic-bezier(.2,.9,.2,1);z-index:200;backdrop-filter: blur(6px);
  box-shadow: 8px 0 40px rgba(0,0,0,0.6);
}
.sidebar.open{left:0}
.sidebar .sb-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px}
.sb-title{font-weight:800}
.sb-sub{color:var(--muted);font-size:13px}

/* search block inside sidebar */
.search-block{background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.search-block input{width:100%;padding:10px;border-radius:10px;border:0;background:transparent;color:var(--text);outline:0}

/* social big buttons */
.social-grid{display:flex;flex-direction:column;gap:10px;margin-top:12px}
.social-btn{
  display:flex;align-items:center;gap:12px;padding:12px;border-radius:12px;color:#fff;font-weight:800;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));box-shadow:0 10px 30px rgba(124,58,237,0.12)
}
.social-btn.wh{background:#25D366;box-shadow:0 10px 30px rgba(37,211,102,0.12)}
.social-small{display:flex;gap:8px;align-items:center}

/* divider & info */
.div{height:1px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));margin:12px 0;border-radius:2px}
.side-note{color:var(--muted);font-size:13px}

/* full-page detail */
.detail-page{position:fixed;inset:0;background:linear-gradient(180deg, rgba(3,2,6,0.96), rgba(8,6,12,0.98));z-index:250;display:none;overflow:auto;padding:16px}
.detail-inner{max-width:980px;margin:8px auto;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.03)}
.detail-hero{height:280px;border-radius:10px;overflow:hidden;background:#040406}
.detail-hero img{width:100%;height:100%;object-fit:cover}
.detail-title{font-weight:800;font-size:18px;margin-top:12px}
.detail-body{color:var(--muted);margin-top:8px;line-height:1.5}
.screens{display:flex;gap:8px;overflow:auto;margin-top:10px}
.screens img{width:220px;height:120px;object-fit:cover;border-radius:8px}

/* small helpers */
.kv{color:var(--muted);font-size:13px}

/* responsive */
@media(max-width:420px){ .sidebar{width:100%;left:-100%} .detail-hero{height:200px} .screens img{width:160px;height:100px} }
</style>
</head>
<body>

<div class="app" id="app">
  <div class="top">
    <button id="openSidebar" class="hamb" aria-label="Abrir menu">≡</button>
    <div style="display:flex;align-items:center;gap:10px">
      <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
      <div>
        <div class="title">GameHub Central</div>
        <div class="subtitle">Mods, apps e utilitários</div>
      </div>
    </div>
  </div>

  <div class="header-info">
    <!-- removed search from main as requested -->
    <div style="flex:1">
      <div style="font-weight:800">Bem-vindo</div>
      <div class="kv">Toque num app para ver detalhes | Mobile</div>
    </div>
    <button id="shareBtn" class="btn ghost">Compartilhar</button>
  </div>

  <div id="list" class="list"></div>
</div>

<!-- improved sidebar -->
<nav id="sidebar" class="sidebar" aria-hidden="true">
  <div class="sb-head">
    <div style="display:flex;align-items:center;gap:10px">
      <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
      <div>
        <div class="sb-title">GameHub Central</div>
        <div class="sb-sub">Links e pesquisa</div>
      </div>
    </div>
    <button id="closeSidebar" class="btn ghost" aria-label="Fechar">✕</button>
  </div>

  <div class="search-block" role="search">
    <label class="kv" style="margin-bottom:8px;display:block">Pesquisar</label>
    <input id="sideSearch" placeholder="Pesquisar por nome, descrição ou tag">
  </div>

  <div class="div"></div>

  <div style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-weight:800">Redes sociais</div>
    <div class="kv">Abrir</div>
  </div>

  <div class="social-grid">
    <a class="social-btn" id="instaBtn" href="https://www.instagram.com/gabe.am29?igsh=bDc4dHl3ZGNhcm4y" target="_blank">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 7.5a4.5 4.5 0 110 9 4.5 4.5 0 010-9z" stroke="#fff" stroke-width="1.2"/></svg>
      Instagram
    </a>

    <a class="social-btn wh" id="whatsBtn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 12.1a9 9 0 10-2.6 6.1L21 22l-2.1-6.9A8.9 8.9 0 0021 12.1z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Grupo WhatsApp
    </a>
  </div>

  <div class="div" style="margin-top:14px"></div>

  <div style="display:flex;flex-direction:column;gap:10px">
    <div style="display:flex;gap:8px;align-items:center">
      <div style="flex:1" class="side-note">Copiar link do site</div>
      <button id="copySite" class="btn ghost">Copiar</button>
    </div>

    <div style="display:flex;gap:8px;align-items:center">
      <div style="flex:1" class="side-note">Adicionar item (futuro)</div>
      <button class="btn ghost" disabled>+</button>
    </div>
  </div>

  <div style="position:absolute;bottom:18px;left:18px;right:18px;color:var(--muted);font-size:13px">GameHub Central • Mobile</div>
</nav>

<!-- full-page detail -->
<div id="detailPage" class="detail-page" aria-hidden="true">
  <div class="detail-inner" id="detailInner"></div>
</div>

<script>
/* Carrega apps.js sem cache */
(async function(){
  try{
    const res = await fetch('apps.js?t=' + Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('apps.js não encontrado');
    const js = await res.text();
    const blob = new Blob([js], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);
    const s = document.createElement('script'); s.src = url;
    s.onload = ()=>{ URL.revokeObjectURL(url); init(); };
    document.body.appendChild(s);
  }catch(e){
    console.error('Erro ao carregar apps.js', e);
    const s = document.createElement('script'); s.src='apps.js'; s.onload=init; document.body.appendChild(s);
  }
})();

/* helpers */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
function q(id){ return document.getElementById(id); }
function debounce(fn,t=160){ let to; return (...a)=>{ clearTimeout(to); to=setTimeout(()=>fn(...a),t); }; }

/* main */
function init(){
  if(!Array.isArray(window.APPS)) window.APPS = [];
  renderList();
  bindUI();
  if(location.hash.startsWith('#/app/')) openDetail(decodeURIComponent(location.hash.replace('#/app/','')));
}

function getApps(){ return Array.isArray(window.APPS) ? window.APPS.slice().sort((a,b)=> (b.highlight?1:0)-(a.highlight?1:0) || (b.timestamp||0)-(a.timestamp||0)) : []; }

function renderList(){
  const apps = getApps();
  const list = q('list');
  if(!apps.length){ list.innerHTML = '<div style="color:var(--muted)">Nenhum app.</div>'; return; }
  list.innerHTML = apps.map(a=>`
    <div class="card" data-slug="${esc(a.slug)}">
      <div class="thumb">${a.icon?'<img src="'+esc(a.icon)+'">':''}</div>
      <div class="info">
        <div class="title-card">${esc(a.title)} ${(a.badges||[]).map(b=>'<span class="kv" style="margin-left:6px;padding:4px 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:800;font-size:12px">'+esc(b)+'</span>').join('')}</div>
        <div class="desc">${esc(a.desc||'')}</div>
        <div class="meta">${esc(a.version||'')} · ${esc(a.size||'')}</div>
      </div>
      <div class="actions">
        <a class="btn" href="${esc(a.download||('files/'+a.slug+'.apk'))}" target="_blank">Download</a>
        <button class="btn ghost" data-open="${esc(a.slug)}">Abrir</button>
      </div>
    </div>
  `).join('');
  // attach events
  q('list').querySelectorAll('[data-open]').forEach(btn=> btn.addEventListener('click', e=> openDetail(btn.dataset.open)));
  q('list').querySelectorAll('.card').forEach(c=> c.addEventListener('click', e=> { if(e.target.closest('a')||e.target.closest('button')) return; openDetail(c.dataset.slug); }));
}

/* open full detail page */
function openDetail(slug){
  const app = getApps().find(a=>a.slug===slug);
  if(!app) return;
  const dp = q('detailPage'), inner = q('detailInner');
  const screens = (app.screenshots||[]).map(s=>`<img src="${esc(s)}">`).join('');
  inner.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center">
      <button id="backBtn" class="btn ghost">← Voltar</button>
      <div style="display:flex;gap:8px">
        <a class="btn" href="${esc(app.download||('files/'+app.slug+'.apk'))}" target="_blank">Baixar</a>
        <button id="copyLinkBtn" class="btn ghost">Copiar link</button>
      </div>
    </div>
    <div class="detail-hero" style="margin-top:12px">${app.screenshots && app.screenshots[0] ? '<img src="'+esc(app.screenshots[0])+'">' : (app.icon?'<img src="'+esc(app.icon)+'">':'')}</div>
    <div class="detail-title">${esc(app.title)}</div>
    <div class="kv">${esc(app.version||'')} · ${esc(app.size||'')}</div>
    <div class="detail-body">${esc(app.fullDesc || app.desc || '')}</div>
    <div style="margin-top:12px"><strong>Screenshots</strong><div class="screens" style="margin-top:8px">${screens}</div></div>
  `;
  dp.style.display='block'; dp.setAttribute('aria-hidden','false');
  q('backBtn').addEventListener('click', ()=> { dp.style.display='none'; dp.setAttribute('aria-hidden','true'); history.pushState({},'', location.pathname); });
  q('copyLinkBtn').addEventListener('click', async ()=> { const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(app.slug); try{ await navigator.clipboard.writeText(url); q('copyLinkBtn').textContent='Copiado!'; setTimeout(()=> q('copyLinkBtn').textContent='Copiar link',1400); }catch(e){} });
  history.pushState({slug}, '', '#/app/' + encodeURIComponent(app.slug));
}

/* UI binding */
function bindUI(){
  q('openSidebar').addEventListener('click', ()=> { q('sidebar').classList.add('open'); q('sidebar').setAttribute('aria-hidden','false'); q('sideSearch').focus(); });
  q('closeSidebar').addEventListener('click', ()=> { q('sidebar').classList.remove('open'); q('sidebar').setAttribute('aria-hidden','true'); });
  q('sideSearch').addEventListener('input', debounce(()=> { const v = q('sideSearch').value; /* reflect to list search */ searchAndRender(v); }, 160));
  q('shareBtn').addEventListener('click', async ()=> { try{ await navigator.clipboard.writeText(location.href); q('shareBtn').textContent='✓'; setTimeout(()=> q('shareBtn').textContent='Compartilhar',1200); }catch(e){ alert('Não foi possível copiar o link.'); } });
  q('copySite').addEventListener('click', async ()=> { try{ await navigator.clipboard.writeText(location.href); q('copySite').textContent='✓'; setTimeout(()=> q('copySite').textContent='Copiar',1200); }catch(e){ alert('Não foi possível copiar o link.'); } });
  // open social buttons keep native hrefs (no JS needed)
}

/* filter list by sidebar search */
function searchAndRender(qv){
  qv = String(qv||'').trim().toLowerCase();
  const apps = getApps();
  const list = q('list');
  const filtered = apps.filter(a=> {
    if(!qv) return true;
    return (a.title+' '+(a.desc||'')+' '+(a.fullDesc||'')+' '+(a.tag||'')).toLowerCase().includes(qv);
  });
  if(!filtered.length){ list.innerHTML = '<div style="color:var(--muted)">Nenhum app encontrado.</div>'; return; }
  list.innerHTML = filtered.map(a=>`
    <div class="card" data-slug="${esc(a.slug)}">
      <div class="thumb">${a.icon?'<img src="'+esc(a.icon)+'">':''}</div>
      <div class="info">
        <div class="title-card">${esc(a.title)} ${(a.badges||[]).map(b=>'<span class="kv" style="margin-left:6px;padding:4px 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:800;font-size:12px">'+esc(b)+'</span>').join('')}</div>
        <div class="desc">${esc(a.desc||'')}</div>
        <div class="meta">${esc(a.version||'')} · ${esc(a.size||'')}</div>
      </div>
      <div class="actions">
        <a class="btn" href="${esc(a.download||('files/'+a.slug+'.apk'))}" target="_blank">Download</a>
        <button class="btn ghost" data-open="${esc(a.slug)}">Abrir</button>
      </div>
    </div>
  `).join('');
  // attach opens again
  q('list').querySelectorAll('[data-open]').forEach(btn=> btn.addEventListener('click', e=> openDetail(btn.dataset.open)));
  q('list').querySelectorAll('.card').forEach(c=> c.addEventListener('click', e=> { if(e.target.closest('a')||e.target.closest('button')) return; openDetail(c.dataset.slug); }));
}

/* expose for debug */
window.getApps = getApps;
</script>
</body>
  </html>
