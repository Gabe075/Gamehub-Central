<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GameHub Central</title>
<meta name="description" content="GameHub Central — mods e apps" />
<style>
:root{
  --bg:#0b0712;
  --panel:#0f0c18;
  --accent1:#7c3aed;
  --accent2:#b68cff;
  --muted:#cfcbe2;
  --text:#f1ecff;
  --card-radius:12px;
  --maxw:1100px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:
  radial-gradient(800px 300px at 8% 6%, rgba(139,75,255,0.06), transparent 8%), var(--bg); color:var(--text);-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
.container{max-width:var(--maxw);margin:18px auto;padding:18px}

/* header */
.header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:56px;height:56px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,var(--accent1),#5b21b6);display:grid;place-items:center}
.logo img{width:100%;height:100%;object-fit:cover}
.title{font-weight:800;font-size:18px}
.subtitle{color:var(--muted);font-size:13px}

/* controls */
.controls{display:flex;gap:10px;align-items:center}
.search{display:flex;align-items:center;gap:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03)}
.search input{background:transparent;border:0;outline:0;color:var(--text);width:360px;padding:6px 8px}
.select{padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));border:0;color:#fff;font-weight:800}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

/* layout */
.layout{display:grid;grid-template-columns:1fr 320px;gap:20px}
@media(max-width:900px){ .layout{grid-template-columns:1fr} .search input{width:160px} .sidebar{order:2} }

/* feed */
.feed{display:flex;flex-direction:column;gap:14px}
.feature{border-radius:14px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);display:flex;gap:12px;align-items:center;padding:12px}
.feature .art{width:46%;height:220px;background:#070507;border-radius:10px;overflow:hidden}
.feature .art img{width:100%;height:100%;object-fit:cover}
.feature .meta{flex:1;padding:6px}
.cards{display:flex;flex-direction:column;gap:12px}
.card{display:flex;align-items:center;gap:14px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.03)}
.card .thumb{width:120px;height:78px;border-radius:8px;overflow:hidden;background:#040306;flex-shrink:0}
.card .thumb img{width:100%;height:100%;object-fit:cover}
.card .info{flex:1}
.title-card{font-weight:800}
.desc{color:var(--muted);font-size:13px;margin-top:6px}
.meta{color:var(--muted);font-size:13px;margin-top:8px}
.card .actions{display:flex;gap:8px;align-items:center}

/* sidebar */
.sidebar{display:flex;flex-direction:column;gap:12px}
.block{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}

/* full-page detail (replaces page) */
.detail-page{
  position:fixed;inset:0;background:linear-gradient(180deg, rgba(3,2,6,0.95), rgba(8,6,12,0.98));z-index:120;display:none;overflow:auto;padding:28px;
}
.detail-inner{max-width:980px;margin:0 auto;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03)}
.detail-hero{height:320px;border-radius:10px;overflow:hidden;background:#040306}
.detail-hero img{width:100%;height:100%;object-fit:cover}
.detail-head{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
.detail-title{font-size:20px;font-weight:800}
.detail-body{margin-top:12px;color:var(--muted);line-height:1.5}
.detail-screens{display:flex;gap:8px;overflow:auto;margin-top:12px}
.detail-screens img{width:240px;height:140px;object-fit:cover;border-radius:8px}

/* back button */
.back-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer}

/* small helpers */
.kv{color:var(--muted);font-size:13px}
.badge{display:inline-block;padding:6px 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:800;font-size:12px}

/* responsiveness */
@media(max-width:680px){
  .feature .art{display:none}
  .detail-hero{height:200px}
  .detail-screens img{width:160px;height:100px}
}
</style>
</head>
<body>

<div class="container">
  <header class="header">
    <div class="brand">
      <div class="logo"><img src="https://raw.githubusercontent.com/Gabe075/Imagem/refs/heads/main/IMG-20251116-WA0008.jpg" alt="logo"></div>
      <div>
        <div class="title">GameHub Central</div>
        <div class="subtitle">Mods, apps e utilitários</div>
      </div>
    </div>

    <div class="controls">
      <div class="search"><svg width="16" height="16" viewBox="0 0 24 24" style="opacity:.7;margin-right:6px"><path fill="currentColor" d="M9.5 3a6.5 6.5 0 104.47 11.13l4.95 4.95 1.41-1.41-4.95-4.95A6.5 6.5 0 009.5 3zM5 9.5A4.5 4.5 0 119.5 14 4.5 4.5 0 015 9.5z"/></svg><input id="search" placeholder="Pesquisar por nome, descrição ou tag"></div>
      <select id="filter" class="select" title="Filtrar">
        <option value="all">Todos</option>
        <option value="games">Jogos</option>
        <option value="mods">Mods</option>
        <option value="apps">Apps</option>
        <option value="tools">Ferramentas</option>
      </select>
      <a id="insta" class="btn" href="https://www.instagram.com/gabe.am29?igsh=bDc4dHl3ZGNhcm4y" target="_blank">Instagram</a>
      <a id="whats" class="btn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">WhatsApp</a>
    </div>
  </header>

  <main class="layout">
    <section class="feed">
      <div id="feature" class="feature" style="display:none"></div>
      <div id="cards" class="cards"></div>
    </section>

    <aside class="sidebar">
      <div class="block">
        <h4>Categorias</h4>
        <div id="cats"></div>
      </div>

      <div class="block">
        <h4>Destaques</h4>
        <div id="high"></div>
      </div>

      <div class="block">
        <h4>Links</h4>
        <a class="btn" href="https://chat.whatsapp.com/Kma7lW0piMU8njwKvqo5e1?mode=hqrc" target="_blank">Entrar no grupo</a>
      </div>
    </aside>
  </main>
</div>

<!-- Full-page detail -->
<div id="detailPage" class="detail-page" aria-hidden="true">
  <div class="detail-inner" id="detailInner">
    <!-- conteúdo injetado -->
  </div>
</div>

<script>
/* --- Carrega apps.js sem cache (APPS é a fonte única) --- */
(async function(){
  try{
    const res = await fetch('apps.js?t=' + Date.now(), { cache: 'no-store' });
    if(!res.ok) throw new Error('apps.js não encontrado');
    const js = await res.text();
    const blob = new Blob([js], { type: 'text/javascript' });
    const url = URL.createObjectURL(blob);
    const s = document.createElement('script'); s.src = url;
    s.onload = ()=>{ URL.revokeObjectURL(url); boot(); };
    document.body.appendChild(s);
  }catch(e){
    console.error('Erro ao carregar apps.js', e);
    const s = document.createElement('script'); s.src='apps.js'; s.onload=boot; document.body.appendChild(s);
  }
})();

/* --- Helpers --- */
function esc(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }
function q(id){ return document.getElementById(id); }
function debounce(fn,t=160){ let to; return (...a)=>{ clearTimeout(to); to=setTimeout(()=>fn(...a),t); }; }

function getApps(){ return Array.isArray(window.APPS) ? window.APPS.slice().sort((a,b)=> (b.highlight?1:0)-(a.highlight?1:0) || (b.timestamp||0)-(a.timestamp||0)) : []; }

/* --- Boot --- */
function boot(){
  if(!Array.isArray(window.APPS)) window.APPS = [];
  renderAll();
  attachUI();
  // open by hash
  if(location.hash.startsWith('#/app/')) openPage(decodeURIComponent(location.hash.replace('#/app/','')));
}

/* --- Renderers --- */
function renderAll(){
  const apps = getApps();
  renderFeature(apps);
  renderCards(apps);
  renderSidebar(apps);
}

function renderFeature(apps){
  const el = q('feature');
  const first = apps.find(a=>a.highlight) || apps[0];
  if(!first){ el.style.display = 'none'; return; }
  el.style.display = 'flex';
  el.innerHTML = `
    <div class="art">${first.screenshots && first.screenshots[0] ? '<img src="'+esc(first.screenshots[0])+'">' : (first.icon?'<img src="'+esc(first.icon)+'">':'')}</div>
    <div class="meta">
      <div style="font-size:18px;font-weight:800">${esc(first.title)}</div>
      <div class="lead" style="color:var(--muted);margin-top:8px">${esc(first.desc||'')}</div>
      <div style="margin-top:12px">
        <a class="btn" href="${esc(first.download||('files/'+first.slug+'.apk'))}" target="_blank">Download</a>
        <button class="btn ghost" onclick="openPage('${esc(first.slug)}')" style="margin-left:10px">Abrir</button>
      </div>
    </div>
  `;
}

function renderCards(apps){
  const cards = q('cards');
  const filter = q('filter').value;
  const term = q('search').value.trim().toLowerCase();
  let list = apps.filter(a=>{
    if(filter !== 'all' && (a.tag||'') !== filter) return false;
    if(!term) return true;
    return (a.title+' '+(a.desc||'')+' '+(a.fullDesc||'')+' '+(a.tag||'')).toLowerCase().includes(term);
  });
  if(!list.length){ cards.innerHTML = '<div style="color:var(--muted)">Nenhum app encontrado.</div>'; return; }
  cards.innerHTML = list.map(a=>`
    <div class="card" data-slug="${esc(a.slug)}">
      <div class="thumb">${a.icon?'<img src="'+esc(a.icon)+'">':''}</div>
      <div class="info">
        <div class="title-card">${esc(a.title)} ${ (a.badges||[]).map(b=>'<span class="badge" style="margin-left:8px">'+esc(b)+'</span>').join('') }</div>
        <div class="desc">${esc(a.desc||'')}</div>
        <div class="meta">${esc(a.version||'')} · ${esc(a.size||'')}</div>
      </div>
      <div class="actions">
        <a class="btn" href="${esc(a.download||('files/'+a.slug+'.apk'))}" target="_blank">Download</a>
        <button class="btn ghost" data-open="${esc(a.slug)}">Abrir</button>
      </div>
    </div>
  `).join('');
  // attach
  cards.querySelectorAll('[data-open]').forEach(b=> b.addEventListener('click', e=> { const slug=b.dataset.open; openPage(slug); }));
  cards.querySelectorAll('.card').forEach(c=>{
    c.addEventListener('click', e=>{
      if(e.target.closest('a') || e.target.closest('button')) return;
      openPage(c.dataset.slug);
    });
  });
}

function renderSidebar(apps){
  const cats = Array.from(new Set(apps.map(a=>a.tag).filter(Boolean)));
  q('cats').innerHTML = cats.map(c=>`<a href="#" data-cat="${esc(c)}">${esc(c)}</a>`).join('');
  q('cats').querySelectorAll('a').forEach(a=> a.addEventListener('click', e=>{ e.preventDefault(); q('filter').value = a.dataset.cat; renderAll(); }));
  q('high').innerHTML = apps.filter(a=>a.highlight).slice(0,6).map(h=>`<div style="margin-bottom:8px"><a href="#/app/${encodeURIComponent(h.slug)}" onclick="event.preventDefault();openPage('${esc(h.slug)}')">${esc(h.title)}</a></div>`).join('');
}

/* --- Page detail (full screen) --- */
function openPage(slug){
  const app = getApps().find(a=>a.slug===slug);
  if(!app) return;
  const dp = q('detailPage');
  const inner = q('detailInner');
  const screens = (app.screenshots||[]).map(s=>`<img src="${esc(s)}">`).join('');
  inner.innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div><button class="back-btn" id="backBtn">◀ Voltar</button></div>
      <div style="display:flex;gap:8px">
        <a class="btn" href="${esc(app.download||('files/'+app.slug+'.apk'))}" target="_blank">Baixar</a>
        <button id="copyLink" class="btn ghost">Copiar link</button>
      </div>
    </div>
    <div class="detail-hero">${app.screenshots && app.screenshots[0] ? '<img src="'+esc(app.screenshots[0])+'">' : (app.icon?'<img src="'+esc(app.icon)+'">':'')}</div>
    <div class="detail-head">
      <div>
        <div class="detail-title">${esc(app.title)}</div>
        <div class="kv" style="margin-top:6px">${esc(app.version||'')} · ${esc(app.size||'')}</div>
      </div>
    </div>
    <div class="detail-body">${esc(app.fullDesc || app.desc || '')}</div>
    <div style="margin-top:12px"><strong>Screenshots</strong>
      <div class="detail-screens" style="margin-top:8px">${screens}</div>
    </div>
  `;
  dp.style.display = 'block';
  dp.setAttribute('aria-hidden','false');
  // back
  q('backBtn').addEventListener('click', ()=> { dp.style.display='none'; dp.setAttribute('aria-hidden','true'); history.pushState({}, '', location.pathname); });
  // copy link
  q('copyLink').addEventListener('click', async ()=> {
    const url = location.origin + location.pathname + '#/app/' + encodeURIComponent(app.slug);
    try{ await navigator.clipboard.writeText(url); q('copyLink').textContent = 'Copiado!'; setTimeout(()=>{ if(q('copyLink')) q('copyLink').textContent='Copiar link'; },1400);}catch(e){}
  });
  history.pushState({slug}, '', '#/app/' + encodeURIComponent(app.slug));
}

/* --- UI bindings --- */
function attachUI(){
  q('search').addEventListener('input', debounce(()=> renderAll(), 160));
  q('filter').addEventListener('change', ()=> renderAll());
  // close detail with escape
  window.addEventListener('keydown', e=>{ if(e.key === 'Escape'){ const dp=q('detailPage'); if(dp.style.display==='block'){ dp.style.display='none'; dp.setAttribute('aria-hidden','true'); history.pushState({}, '', location.pathname); } } });
}

/* expose for debug */
window.getApps = getApps;
</script>

</body>
  </html>
